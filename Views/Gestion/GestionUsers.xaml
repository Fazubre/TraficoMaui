<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="TraficoCRFront.Views.Gestion.GestionUsers"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    Title="Gestión de Usuarios">

    <ScrollView>
        <VerticalStackLayout
            Padding="20"
            BackgroundColor="#EAE8F9"
            Spacing="20">

            <Label
                FontAttributes="Bold"
                FontSize="24"
                HorizontalOptions="Center"
                Text="Gestión de Usuarios"
                TextColor="#701A3F" />

            <Frame
                Padding="15"
                BackgroundColor="#FFFFFF"
                BorderColor="#701A3F"
                CornerRadius="12">
                <VerticalStackLayout Spacing="5">
                    <Label
                        FontAttributes="Bold"
                        FontSize="18"
                        HorizontalOptions="Center"
                        Text="Niveles de Acceso"
                        TextColor="#701A3F" />
                    <Label Text="• 1 - Usuario común" TextColor="#701A3F" />
                    <Label Text="• 2 - Moderador" TextColor="#701A3F" />
                    <Label Text="• 3 - Administrador" TextColor="#701A3F" />
                    <Label Text="• 4 - Super Administrador" TextColor="#701A3F" />
                </VerticalStackLayout>
            </Frame>

            <HorizontalStackLayout Spacing="10">

                <Entry
                    x:Name="busquedaEntry"
                    Margin="35,0,0,0"
                    BackgroundColor="White"
                    Placeholder="Buscar usuario"
                    TextColor="#2E2E2E"
                    WidthRequest="220" />
                <Button
                    Margin="25,0,0,0"
                    BackgroundColor="#701A3F"
                    Clicked="OnBuscarClicked"
                    CornerRadius="10"
                    Text="Buscar"
                    TextColor="White" />
            </HorizontalStackLayout>

            <Frame
                Padding="10"
                BackgroundColor="#F175A9"
                BorderColor="#701A3F"
                CornerRadius="20">
                <Grid Padding="10" ColumnDefinitions="*,Auto,Auto">
                    <Label
                        FontAttributes="Bold"
                        Text="Usuario"
                        TextColor="#701A3F" />
                    <Label
                        Grid.Column="1"
                        Margin="0,0,50,0"
                        FontAttributes="Bold"
                        Text="Nivel"
                        TextColor="#701A3F" />
                    <Label
                        Grid.Column="2"
                        FontAttributes="Bold"
                        HorizontalOptions="End"
                        Text="Acciones"
                        TextColor="#701A3F" />
                </Grid>
            </Frame>

            <Frame BorderColor="#701A3F" CornerRadius="20">
                <CollectionView x:Name="usuariosListView" SelectionMode="None">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Grid
                                Padding="10"
                                BackgroundColor="White"
                                ColumnDefinitions="*,Auto,Auto">
                                <Label
                                    FontSize="16"
                                    Text="{Binding Username}"
                                    TextColor="#2E2E2E" />
                                <Label
                                    Grid.Column="1"
                                    Margin="0,0,50,0"
                                    FontSize="16"
                                    HorizontalOptions="Center"
                                    Text="{Binding NivelAcceso}"
                                    TextColor="#701A3F" />
                                <Button
                                    Grid.Column="2"
                                    Padding="5"
                                    BackgroundColor="#701A3F"
                                    Clicked="OnAccionesClicked"
                                    CommandParameter="{Binding UsuarioId}"
                                    CornerRadius="10"
                                    Text="⋮"
                                    TextColor="White" />
                            </Grid>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </Frame>

            <Button
                BackgroundColor="#701A3F"
                Clicked="OnVolverClicked"
                CornerRadius="10"
                HorizontalOptions="Center"
                Text="Volver"
                TextColor="White"
                WidthRequest="120" />
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
